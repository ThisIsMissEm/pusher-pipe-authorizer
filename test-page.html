<!DOCTYPE html>
<html>
<head>
  <title>Pusher Pipe Authorizer</title>

  <!-- Includes -->
  <script src="http://js.pusherapp.com/1.10.1-pre/pusher.min.js" type="text/javascript"></script>
  <script type="text/javascript" src="/public/pipe-authorizer.js"></script>
</head>
<body id="body">
  <script type="text/javascript">
    Pusher.log = function(data) {console.log(data)}
    Pusher.channel_auth_transport = 'pipe';

    // Normally you'd use something like a cookie's value here:
    Pusher.authorizers.pipe.setIdentity('john');

    // Create a connection
    var pusher = new Pusher('799a7166ed17013964ea');

    // Subscribe to a channel:
    var channel = pusher.subscribe('private-channel');

    channel.bind('subscription_error', function(){
      console.log('error');
    });

    channel.bind('pusher:subscription_succeeded', function(){
      console.log('success');
    });
  </script>
</body>
</html>
